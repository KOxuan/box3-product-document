# RegExp å¢å¼º

ç°ä»£æ­£åˆ™æ–°å¢å¤šç§èƒ½åŠ›ï¼š

```javascript
// u æ ‡å¿—ï¼ŒæŒ‰ Unicode å¤„ç†
/^.$/u.test("ğŸ˜€"); // trueï¼ˆæ—  u æ—¶ä¸º falseï¼‰

// å‘½åæ•è·ç»„
const re = /(?<name>\w+)-(?<id>\d+)/;
const m = "user-42".match(re);
console.log(m.groups.name, m.groups.id); // 'user' '42'

// å…ˆè¡Œ/åè¡Œæ–­è¨€
/(?<=#)\w+/.exec("tag:#news")[0]; // 'news'
```

é…åˆ `String.prototype.matchAll` ç­‰æ–¹æ³•æ›´æ–¹ä¾¿å¤„ç†ã€‚

## æ ‡å¿—ï¼ˆflagsï¼‰ä¸ä½œç”¨

- `u`ï¼šUnicode æ¨¡å¼ï¼Œæ­£ç¡®å¤„ç†ä»£ç ç‚¹ï¼ˆå¦‚ emojiï¼‰ã€‚
- `s`ï¼šdotAllï¼Œ`.` å¯ä»¥åŒ¹é…æ¢è¡Œç¬¦ã€‚
- `y`ï¼šsticky æ¨¡å¼ï¼Œä» `lastIndex` å¼€å§‹å¿…é¡»ç´§è´´åŒ¹é…ã€‚
- `d`ï¼šmatch indicesï¼Œè¿”å›åŒ¹é…ä¸‹æ ‡ï¼ˆéœ€å¼•æ“æ”¯æŒï¼‰ã€‚

```javascript
/.+/s.test("a\n b"); // trueï¼ˆæ—  s æ—¶ . ä¸åŒ¹é…æ¢è¡Œï¼‰

const re = /\w+/y; // sticky
re.lastIndex = 3;
console.log(re.exec("..abc def")); // ä»ç´¢å¼•3å¼€å§‹ç²˜æ€§åŒ¹é… -> ['abc']
```

## å‘½åæ•è·ç»„ä¸åå‘å¼•ç”¨

```javascript
const re = /(?<user>\w+)-(?<id>\d+)/;
const m = "alice-007".match(re);
console.log(m.groups.user, m.groups.id);

// æ›¿æ¢æ—¶ä½¿ç”¨å‘½ååå‘å¼•ç”¨
"alice-007".replace(re, "$<id>:$<user>"); // '007:alice'
```

## å‰ç»/åé¡¾æ–­è¨€ï¼ˆlookahead/lookbehindï¼‰

```javascript
// æ­£å…ˆè¡Œæ–­è¨€ï¼šåé¢å¿…é¡»æ˜¯ px
/\d+(?=px)/.exec("16px")[0]; // '16'

// è´Ÿå…ˆè¡Œæ–­è¨€ï¼šåé¢ä¸èƒ½æ˜¯ %
/\d+(?!%)/.exec("50% em")[0]; // '50'ï¼ˆåŒ¹é…ç¬¬ä¸€ä¸ª 50 å‰æåé¢ä¸æ˜¯%ï¼‰

// æ­£åè¡Œæ–­è¨€ï¼šå‰é¢å¿…é¡»æ˜¯ #
/(?<=#)\w+/.exec("tag:#news")[0]; // 'news'

// è´Ÿåè¡Œæ–­è¨€ï¼šå‰é¢ä¸èƒ½æ˜¯ -
/(?<!-)\d+/.exec("id-42 num43")[0]; // '43'
```

## Unicode å±æ€§ç±»ï¼ˆ\p{...}ï¼‰

```javascript
// åŒ¹é…æ‰€æœ‰å­—æ¯å­—ç¬¦ï¼ˆå«éæ‹‰ä¸ï¼‰
/\p{L}+/u.test("æ¼¢å­—abc"); // true

// ä»…åŒ¹é…æ•°å­—å­—ç¬¦
/^\p{N}+$/u.test("Ù¡Ù¢Ù£"); // trueï¼ˆé˜¿æ‹‰ä¼¯æ•°å­—ï¼‰
```

## Match Indicesï¼ˆd æ ‡å¿—ï¼‰ä¸ matchAll

```javascript
const re = /(ab)/d;
const m = re.exec("xxabyy");
console.log(m.indices); // [[2,4],[2,4]]ï¼ˆéœ€ç¯å¢ƒæ”¯æŒï¼‰

for (const m of "a1 b2 c3".matchAll(/(\w)(\d)/g)) {
  console.log(m[0], "at", m.index);
}
```

## å¸¸è§é™·é˜±

- å¿˜è®° `u` å¯¼è‡´ Unicode å¤„ç†å¼‚å¸¸ï¼ˆç‰¹åˆ«æ˜¯ emojiã€åˆæˆå­—ç¬¦ï¼‰ã€‚
- æ»¥ç”¨å›æº¯å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼ˆç¾éš¾æ€§å›æº¯ï¼‰ï¼›
- ä½¿ç”¨ `g` æ ‡å¿—æ—¶è¦æ³¨æ„ `lastIndex` çš„å‰¯ä½œç”¨ï¼ˆåå¤ `test`ï¼‰ã€‚

## æœ€ä½³å®è·µ

- ä¼˜å…ˆä½¿ç”¨å‘½åæ•è·ç»„æå‡å¯è¯»æ€§ï¼›
- é¿å…å¤æ‚ä¸”å¯èƒ½å›æº¯çˆ†ç‚¸çš„æ­£åˆ™ï¼Œå¿…è¦æ—¶åˆ†æ­¥å¤„ç†ï¼›
- å¯¹ Unicode æ–‡æœ¬å¯ç”¨ `u` æ ‡å¿—ï¼›
- åœ¨éœ€è¦ä½ç½®ç´¢å¼•æ—¶ä½¿ç”¨ `d` æˆ– `matchAll`ï¼ˆè§†å…¼å®¹æ€§ï¼‰ã€‚

## ç»ƒä¹ 

1. å†™ä¸€ä¸ªæ­£åˆ™æå– CSS é•¿åº¦å€¼ï¼šæ”¯æŒ `px/%/em/rem` å¹¶è¿”å›æ•°å€¼ä¸å•ä½ï¼ˆå‘½åæ•è·ç»„ï¼‰ã€‚
2. å†™ä¸€ä¸ªå¸¦è´Ÿå…ˆè¡Œæ–­è¨€çš„æ­£åˆ™ï¼ŒåŒ¹é…ä¸ä»¥ `#` å¼€å¤´çš„æ ‡ç­¾å•è¯ã€‚
3. ç”¨ `matchAll` éå† `key=value` å¯¹ï¼Œæ„å»ºå¯¹è±¡ç»“æœã€‚
