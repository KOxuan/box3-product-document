# ArenaNext - 下一代神岛编辑器

ArenaNext 是神岛 Arena 编辑器的功能抢先预览版插件，让用户提前体验下一代编辑器的智能化特性。经过用户验证和优化后的功能将会正式内置到未来的编辑器版本中。

:::warning 已知问题提示

语法检查对客户端脚本部分代码（如导入文件代码）产生误判，显示不实际存在的错误。

如遇此情况，请在编辑器设置中暂时关闭语法检查功能。

最终以引擎能运行为准。
:::

## 插件安装

本插件基于篡改猴，需要先安装篡改猴插件管理器 [tampermonkey](./tampermonkey)。

安装后，再安装 ArenaNext 插件：[https://static.pgaot.com/Assets/js/arenanext.user.js](https://static.pgaot.com/Assets/js/arenanext.user.js)

完成安装后，请重启浏览器以确保插件正常加载。然后进入神岛 Arena 编辑器，即可体验智能编码的全新乐趣！

## 核心功能

### 🐛 代码错误处理与修复

- 🔍 **智能错误高亮显示**：实时在代码行尾直接显示错误信息，红色背景标识错误行，橙色标识警告行
- 📊 **错误列表面板**：在编辑器底部展示全部代码错误、警告和提示，便于快速定位和解决问题
- 🔧 **一键修复**：点击"吉 PT 一键修复"按钮，AI 会自动分析并尝试修复所有代码问题
- 💡 **错误解释**：点击单个错误的"解释报错"按钮获取详细错误说明和针对性修复建议
- 🤖 **AI 错误解释助手**：在控制台错误旁显示 AI 按钮，点击后智能分析运行时错误并提供解决方案

### 📊 代码分析与优化

- 🔎 **代码透镜(CodeLens)**：在函数和类定义上方提供智能操作菜单，快速访问高级功能
- 📋 **代码复制**：通过代码透镜菜单一键复制整个函数或类的代码，提高开发效率
- 👁️ **Peek 定义视图**：点击引用可预览代码定义，无需跳转即可快速查看引用代码内容
- 📝 **上下文菜单**：右键点击编辑器访问丰富的代码分析功能：
  - ✅ 纠正代码错误：快速修复当前错误
  - 🔄 长函数拆分：自动将复杂函数拆分为更易维护的小函数
  - ⚙️ 优化重构代码：按最佳实践优化现有代码结构
  - 📚 详细解释代码：获取选中代码的详细解释
  - 💬 注释生成：自动为函数和类生成标准注释
  - 📘 API 详细解释和示例：查看神岛 API 的详细用法和示例

### 🎨 编辑器增强

- ⚡ **JavaScript/TypeScript 支持**：提供高级类型检查和智能语法分析，减少错误
- 🔍 **TypeScript 支持**：自动识别.ts 和.tsx 文件，提供完整类型检查和代码导航功能
- ⚙️ **代码严格度设置**：可自定义配置 JavaScript/TypeScript 验证选项，支持本地保存配置
- 👁️ **代码引用查看**：只读模式直接查看代码定义，无需切换文件，提高代码浏览效率
- 💾 **配置持久化**：自动保存用户编辑器配置到本地存储，下次使用时自动恢复设置
- 🎭 **语法高亮优化**：精确匹配 VS Code 的语法配色，提供舒适的代码阅读体验
- 🔠 **智能括号引导线**：点击代码时显示不同颜色的垂直引导线，轻松识别代码块范围
- 🎨 **颜色可视化**：为 GameRGBColor、GameRGBAColor 和 Vec3.create 提供实时颜色预览
- 💡 **代码提示优化**：增强的自动补全提示，支持神岛 API 智能提示，大幅提高编码速度

### 🖌 UI 增强功能

- 🚦 **错误类型区分**：通过不同的颜色和图标直观区分各类问题：
  - 🔴 错误（红色）：必须修复的严重问题
  - 🟠 警告（橙色）：可能导致 bug 的潜在问题
  - 🟡 注意（黄色）：代码质量相关建议
  - 🔵 信息（蓝色）：提示性信息
- 🔍 **错误列表过滤**：通过类型筛选器快速聚焦于特定类型的问题，高效解决错误
- ↕️ **可调整大小的面板**：拖动调整错误列表高度，保存用户首选项，适应个人工作习惯
- 📍 **智能定位**：自动适应调试面板位置，确保最佳界面布局和使用体验
- 🧹 **控制台清理**：一键清空控制台日志，提高调试效率，保持环境整洁

### 💻 编辑体验增强

- 🔍 **自动代码选择**：点击错误项自动选择相关代码，快速定位问题代码位置
- ✨ **自动格式化**：回车/粘贴/保存时自动格式化代码，实时保持代码整洁，提高可读性
- ⌨️ **快捷键支持**：
  - Ctrl+S：格式化当前脚本文件
  - Ctrl+点击代码：打开定义，快速跳转到引用源
  - F5：运行地图，立即测试代码效果
  - Ctrl+鼠标滚轮：代码区缩放，调整编辑器文字大小

> 💡 **提示**：安装完插件后，为了确保 ArenaNext 正常运行，建议重启浏览器后再次进入神岛编辑器。

## 安装与使用

### 用户安装

1. 安装 Tampermonkey 或其他用户脚本管理器浏览器扩展

   - Chrome: Tampermonkey
   - Firefox: Tampermonkey
   - Edge: Tampermonkey

2. 安装 ArenaNext 插件

   - 访问安装链接 [https://static.pgaot.com/Assets/js/arenanext.user.js](https://static.pgaot.com/Assets/js/arenanext.user.js)
   - 在弹出的 Tampermonkey 页面中点击"安装"按钮

3. 重启浏览器并在神岛编辑器中使用
   - 完全关闭并重新打开浏览器
   - 打开神岛编辑器
   - 插件会自动加载并激活，编辑器界面将显示增强功能

### AI 错误解释助手使用方法

控制台错误解释功能提供智能错误分析，帮助你快速理解和解决问题：

- 当控制台出现错误时，每条错误消息右侧会显示一个"AI"按钮
- 点击该按钮，AI 助手会立即分析错误并提供详细解释
- AI 会给出错误原因分析和具体修复建议，包括代码示例
- 适用于各类错误，包括语法错误、运行时错误、逻辑错误和 API 使用错误

### 设置代码严格度

1. 在编辑器左侧菜单找到"脚本检查严格度设置"
2. 根据开发需求调整严格程度：
   - 基础模式：适合入门用户，只提供基本错误检查
   - 标准模式：适合一般开发，提供平衡的错误和警告检查
   - 严格模式：适合专业开发，提供全面的代码质量检查
3. 设置会自动保存，下次打开编辑器时自动应用
