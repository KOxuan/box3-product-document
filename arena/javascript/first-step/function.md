# 函数与方法

::: info 一些说明
需要注意的是，此处的「函数」与数学中的函数有区别也有联系。

在数学家眼中，对于一个函数，一旦你确定了输入，就会得到一个固定的输出。编程中这种函数被称为「[纯函数](https://zhuanlan.zhihu.com/p/139659155)」。这种函数并不在我们的讨论范围之内，感兴趣的读者可以自行上网搜索。
:::

> 在 JavaScript 中，你将发现函数无处不在。事实上，到目前为止，我们一直在使用函数；我们只是还没正式地讨论它们。然而现在是时候了，让我们开始聊聊函数，并探索它们的语法。
>
> 几乎任何时候，只要你使用一个带有一对圆括号（`()`）的 JavaScript 结构，并且你没有使用比如 `for` 循环、`while` 或 `do...while` 循环，或者 `if...else` 语句这样的常见的内置语言结构时，那么你就正在使用函数。
>
> （引用自[MDN Docs: 函数——可复用的代码块](https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Building_blocks/Functions)）

你可能注意到，我们之前一直在使用的`console.log`就是一个**函数**。

如果你认真读过[这一章节](/javascript/first-step/data-storage#列表简介)，你会发现所有的列表都有一个`push`函数。这种属于一个对象的函数又被成为**方法**。当然，你不需要刻意区分函数和方法。

接下来，让我们隆重介绍这一熟悉又陌生的伙伴：函数。

## 什么是函数？
简单来说，函数是一段可以重复使用的代码。它就像一个数据处理机器，你可以给它一些输入（我们称之为“参数”），它就会给你一些输出（我们称之为“返回值”）。

## 为什么需要函数？
想象一下，如果你有一段代码需要在多个地方使用，每次都重写一遍是不是很麻烦？有了函数，你只需要写一次，然后在需要的地方“调用”它就可以了。这样不仅可以节省时间，还可以让代码更整洁、更易于维护。

## 函数的声明
在 JavaScript 中，声明函数有多种方式。最常见的是使用 `function` 关键字，后面跟着函数名和一对圆括号，里面可以包含参数。例如：
```javascript
function sayHello(name) {
  console.log("Hello, " + name + "!");
}
```
这个函数名为 `sayHello`，它接受一个参数 `name`，然后输出一句问候语。

::: info 函数的参数
参数就像是函数的“输入”。在函数内部，你可以像使用普通变量一样使用这些参数。在上面的例子中，`name` 就是一个参数。
:::

## 匿名函数
匿名函数，顾名思义，就是没有名字的函数。它们通常用于那些只需要使用一次的场景，或者作为参数传递给其他函数。匿名函数通常被赋值给一个变量，或者直接在需要的地方使用。

创建匿名函数的方式很简单：只需要在普通函数的定义中去掉函数的名字就行了。例如，下面是一个简短的示例，在玩家加入世界的时候输出一条问候语：
```javascript
world.onPlayerJoin(function (event) => {
  world.say(`${event.entity.player.name} joined the world!`);
})
```

## 箭头函数
箭头函数是 ES6 引入的一种写法，它提供了一种更简洁的方式来编写函数表达式。
::: details 箭头函数的 `this`
箭头函数不会创建自己的 `this`，它们继承自父执行上下文的 `this` 值。这意味着在箭头函数内部，`this` 的值与外部相同。

目前不用过于担心，将箭头函数当作普通的函数就行。后面的章节中我们会对此做出说明。
:::

### 示例：箭头函数的基本用法
```javascript
const add = (a, b) => {
  return a + b;
};
console.log(add(5, 3)); // 输出：8
```
在这个例子中，我们使用箭头函数定义了一个 `add` 函数。箭头函数的语法是 `(参数) => { 函数体 }`。如果函数体只有一条语句，并且是返回语句，可以进一步简化：
```javascript
const add = (a, b) => a + b;
```

### 示例：箭头函数与数组方法结合
箭头函数经常与数组的方法如 `map`、`filter` 和 `reduce` 一起使用，提供一种更简洁的函数式编程风格。
```javascript
const numbers = [1, 2, 3, 4, 5];
const squaredNumbers = numbers.map(num => num * num);
console.log(squaredNumbers); // 输出：[1, 4, 9, 16, 25]
```
在这个例子中，我们使用 `map` 方法和一个箭头函数来创建一个新的数组，其中包含原数组中每个数字的平方。


## 返回值
函数可以“返回”一个值，这样你就可以在其他地方使用这个值了。例如在上面的例子中：
```javascript
function add(a, b) {
  return a + b;
}
console.log("1 + 1 = ?")
console.log(add(1, 1));
```
这个函数接受两个参数 `a` 和 `b`，然后返回它们的和。你可以将其作为一个值使用。

现在，你已经对 JavaScript 中的函数有了基本的了解。让我们通过一个简单的实例来更好地理解函数的概念。

## 实际应用
函数在实际编程中非常有用。比如，你有一个购物车应用程序，用户添加了多个商品，你需要计算所有商品的总价。这时，你可以使用一个类似的函数来累加每个商品的价格。
```javascript
function calculateTotal(price1, price2, price3) {
  return price1 + price2 + price3;
}
const total = calculateTotal(29.99, 15.5, 12.3);
console.log(total); // 输出：57.78
```
在这个例子中，我们创建了一个名为 `calculateTotal` 的函数，它接受三个价格作为参数，并返回它们的总和。这样，无论用户添加多少商品，亦或是商品价格的计算规则需要随时修改，我们都可以轻松计算出总价。

通过这些实例，你可以看到函数是如何帮助我们重用代码并使程序更加「模块化」的。随着你深入学习和实践，你将发现更多函数的强大功能和用途。
