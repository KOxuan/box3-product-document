# Debug 模式详解

在开发游戏或应用时，Debug 模式是一个非常重要的工具，它能够帮助创作者快速定位并解决问题。

### 代码生成对比

- **关闭 Debug 模式**：生成的代码经过`压缩和混淆`
  ![](/QQ20241202-222614.png)

- **开启 Debug 模式**：生成的代码`未压缩和混淆`
  ![](/QQ20241202-222905.png)

## 核心功能

### 开发阶段支持

Debug 模式主要用于`开发阶段`，它允许创作者在神岛环境/VSCode 中直接进行调试。与生产环境相比，Debug 模式生成的代码是`未经压缩和混淆`的，这使得代码更易于阅读和理解。

### 错误处理

Debug 模式提供了更详细的错误信息和堆栈跟踪，有助于创作者快速定位问题所在。

### 性能与安全

由于 Debug 模式生成的代码体积较大且未经优化，因此在生产环境中使用可能会带来性能上的影响及潜在的安全风险。我们强烈建议仅在开发阶段启用 Debug 模式，并在发布前切换到生产模式以确保应用的最佳性能和安全性。

## 配置指南

### 配置文件修改

1. 打开`dao3.config.json`文件
2. 找到与当前端（如客户端或服务端）相关的配置部分
3. 将`developmentAll`或`development`属性的值改为`true`，以启用 Debug 模式

```json
{
  "ArenaPro": {
    "file": {
      "typescript": {
        "server": {
          "development": true // 服务端开启debug代码
        },
        "client": {
          "development": true // 服务端开启debug代码
        },
        "developmentAll": null // 开启服务端和客户端debug代码，优先级最高，null表示忽略该属性。
      }
    }
  }
}
```

### 构建与验证

1. 保存`dao3.config.json`文件后，重新构建项目
2. 进入`dist`文件夹中查看生成的捆绑 JS 文件
3. 验证生成的 JS 文件是未经压缩和混淆的

### 调试流程

1. 打开神岛创作端并加载项目
2. 运行地图以查看效果
3. 查看错误信息和堆栈跟踪（如果存在）
4. 通过错误信息中的链接或文件名跳转到出错的代码行

## 最佳实践

### 代码修改

- 避免直接修改生成的 JS 文件，因为 JS 文件是由 TS 编译生成的，直接修改可能会导致代码不一致和难以维护

### 版本控制

- 使用 TypeScript（TS）时，确保在修改源代码后重新构建项目以使更改生效

### 发布准备

- 在发布前，将`development`属性设置为`false`以切换到生产模式
- 重新构建项目以生成压缩和混淆后的代码
