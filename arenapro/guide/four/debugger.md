# VSCode 调试脚本指南

本调试功能建立在 Node.js 的调试基础之上，无需依赖特定的 AP 插件即可进行调试。我们对动态编译文件路径、源映射等繁琐配置进行了优化，旨在减轻创作者的手动配置负担。

> **注意**：目前暂不支持对神岛 API 进行调试。

## 编译模式

在调试过程中，你可以选择以下两种编译模式：

- **HMR 编译**（推荐）：自动监听文件变化并自动编译，支持在修改 `ts` 文件的同时进行调试
- **完整编译**：需要手动编译，只能在编译后的 `js` 文件上进行断点调试

## 捆绑 JS 文件调试

### 配置 `launch.json`

1. **创建文件**：

   - 初次调试时，需要创建 `launch.json` 文件（如果已存在可跳过此步骤）
     ![创建 launch.json 文件](/QQ20241101-111306.png)

2. **选择配置**：

   - **Arena Debugger**（目前不支持）：远程调试神岛编辑器
   - **ArenaPro Client Debugger**：本地调试客户端捆绑 JS 文件
   - **ArenaPro Server Debugger**：本地调试服务端捆绑 JS 文件
     ![选择调试配置](/QQ20241101-111542.png)

3. **自动生成**：

   - 选择配置后，VSCode 会自动生成对应的调试配置
     ![自动配置](/QQ20241101-111952.png)

4. **新增配置**：
   - 可通过右下角按钮新增配置
     ![新增配置](/QQ20241101-112041.png)

### 调试流程

1. 选择 `HMR编译` 模式进行编译
2. 关闭编译脚本上传功能（推荐）
   ![关闭上传功能](/QQ20241101-112658.png)
3. 开启 debugger 模式（推荐）
   ![开启 debugger 模式](/QQ20241101-142736.png)
4. 在任意 `ts` 文件中设置断点，按下 `F5` 开始调试
   ![调试过程](/QQ20241101-125949.png)

## 单个 JS 文件调试

VSCode 提供了快速调试单个 JS 脚本的功能：

1. 在 `.js`、`.mjs` 或 `.cjs` 文件中设置断点
2. 点击编辑器右上角 `快速Debugger` 按钮
   - 快捷键：`Alt+D`
     ![单个 JS 文件调试](/QQ20241101-131416.png)

> **注意**：默认非捆绑文件的 `.js` 文件会被解析为 `ECMAScript` 模块。
