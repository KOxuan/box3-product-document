# 🔄 资源同步指南

在使用神岛 API（如播放背景音乐、创建实体等）时，需要填写资源路径。为确保资源路径的正确性，插件提供了资源同步功能。

## 📦 支持的资源类型

| 资源类型    | 说明              |
| ----------- | ----------------- |
| 🧊 **模型** | 3D 模型、场景元素 |
| 🎵 **音频** | 背景音乐、音效    |
| 🖼️ **图片** | 贴图、UI 素材等   |

> **快捷操作**：使用快捷键 `Alt + Y` 快速同步资源

## ⚙️ 功能说明

### 1️⃣ 一键同步

| 步骤 | 操作说明                                 |
| ---- | ---------------------------------------- |
| 1    | 确保已成功链接地图                       |
| 2    | 点击`一键同步地图资源`按钮               |
| 3    | 等待同步完成（时间取决于资源数量和大小） |

![一键同步按钮示例](/QQ20241222-153830.png)

### 2️⃣ 同步流程

同步操作会按照以下顺序执行：

| 顺序 | 内容     | 说明             |
| ---- | -------- | ---------------- |
| 1    | 模型同步 | 同步所有模型数据 |
| 2    | 音频同步 | 同步所有音频数据 |
| 3    | 图片同步 | 同步所有图片数据 |

![同步进度示例](/QQ20241222-154927.png)

## 📄 生成文件

同步完成后，将在以下目录生成类型定义文件：

| 文件路径                       | 用途               |
| ------------------------------ | ------------------ |
| `server/types/GameAssets.d.ts` | 服务端资源类型定义 |
| `client/types/GameAssets.d.ts` | 客户端资源类型定义 |

![生成的文件示例](/QQ20241222-155644.png)

### 类型定义文件内容

<details>
<summary><b>查看文件内容示例</b></summary>

```typescript
// 地图音频资源类型
type GameAudioAssets = "";

// 地图图片资源类型
type GamePictureAssets = "";

// 地图模型资源类型
type GameModelAssets = "";
```

</details>

## 🛠️ 使用说明

### 类型约束

| 优势     | 说明                         |
| -------- | ---------------------------- |
| 类型检查 | 在脚本中使用这些类型进行约束 |
| 实时检测 | 检测资源是否存在             |
| 错误提示 | 资源不存在时给出提示         |
| 智能提示 | 根据程序提示快速选择资源     |

![脚本中使用类型约束示例](/QQ20241222-160335.png)

:::warning
**⚠️ 注意**：建议经常进行资源同步，以避免因资源更新导致的类型错误提示。
:::

## 🧩 代码片段功能

同步资源时，插件会在`.vscode`文件夹中生成代码片段文件：`dao3-GameAssets.code-snippets`

### 快捷输入

| 输入指令   | 功能             | 示例                                                                 |
| ---------- | ---------------- | -------------------------------------------------------------------- |
| `#audio`   | 快速调用音频资源 | `const sound = world.audio.createAudioInstance({ url: "音频路径" })` |
| `#picture` | 快速调用图片资源 | `const img = "图片路径"`                                             |
| `#mesh`    | 快速调用模型资源 | `const entity = world.createEntity({ modelName: "模型路径" })`       |

![快速调用资源代码片段示例](/QQ20241222-160744.png)

## 🔁 同步频率建议

| 场景     | 建议                               |
| -------- | ---------------------------------- |
| 初始开发 | 开始开发前先同步一次               |
| 资源更新 | 地图中新增或删除资源后立即同步     |
| 团队协作 | 拉取最新代码后进行同步             |
| 编码提示 | 当发现资源路径提示不准确时进行同步 |
