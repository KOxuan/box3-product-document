# 跨项目引用

在神岛地图开发过程中，为了提高代码复用率和开发效率，不同扩展地图之间可能会共享一些代码，特别是工具类代码。跨项目引用功能允许项目 A 直接使用项目 B 中的代码，实现功能复用。

## 实现步骤

### 1. 配置工作区

#### 1.1 添加项目文件夹

AP 插件支持多项目开发模式，能够自动识别当前打开的项目文件，决定构建和资源管理的目标。通过以下步骤将项目 B 的文件夹引入工作区：

1. 在资源管理器中，右键点击空白处
2. 选择`增加文件夹到工作区（Add Folder to Workspace...）`选项
3. 选择项目 B 的文件夹并点击确定

现在，工作区包含两个根文件夹，分别代表两个神岛代码项目。

![增加文件夹到工作区](/QQ20241130-105649.png)

接着，选择项目 B 的文件夹并点击确定。

![选择项目B文件夹](/QQ20241130-105935.png)

现在，我们已经创建了一个包含两个根文件夹的工作区，分别代表两个神岛代码项目。

### 引用项目代码

假设我们现在想在`bottleMan`项目中引用`Backroom`项目中的`sum`函数。

### 2. 配置项目引用

#### 2.1 修改 tsconfig 配置

在`bottleMan`项目下的服务端或客户端的`tsconfig.json`文件中，将`rootDir`属性设置为`../../`，以便能够引用到`Backroom`项目下的文件。

![配置`tsconfig.json`](/QQ20241130-110625.png)

#### 2.2 引用目标文件

在`bottleMan`项目下的服务端`App.ts`文件中，直接引用`Backroom`项目下的`utils.ts`文件。

![引用文件](/QQ20241130-110733.png)

### 3. 验证引用

通过构建项目，在神岛编辑器中验证是否能够正常使用引用的代码。

## 注意事项

1. 确保被引用项目的文件路径正确
2. 检查 tsconfig 配置是否生效
3. 构建时注意项目依赖关系

![验证引用效果](/QQ20241130-111024.png)

通过以上步骤，我们成功实现了在神岛地图开发中的跨项目代码引用，提高了开发效率和代码复用率。
