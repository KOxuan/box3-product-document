# è¿›é˜¶åŠŸèƒ½(ä¹)ï¼šå¯¼å‡ºä»£ç åˆ° Arena

å½“ä½ ä½¿ç”¨ ArenaPro æ„å»ºäº†å¼ºå¤§çš„åŠŸèƒ½åï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼š

> â€œæˆ‘å¦‚ä½•å°†è¿™äº›å¤æ‚çš„åŠŸèƒ½ï¼Œåˆ†äº«ç»™ä¸ç†Ÿæ‚‰ ArenaPro çš„é˜Ÿå‹ï¼Œæˆ–è€…åœ¨å…¶ä»–é¡¹ç›®ä¸­å¤ç”¨å®ƒä»¬å‘¢ï¼Ÿâ€

ç­”æ¡ˆå°±æ˜¯ **ä»£ç å¯¼å‡º**ã€‚

é€šè¿‡è¿™ä¸ªæœºåˆ¶ï¼Œä½ å¯ä»¥å°†ä½ çš„ ArenaPro é¡¹ç›®å°è£…æˆä¸€ä¸ªç®€å•æ˜“ç”¨çš„â€œåŠŸèƒ½é»‘ç›’â€ï¼Œè®©å…¶ä»–åˆ›ä½œè€…ï¼ˆç”šè‡³æ˜¯ä¸æ‡‚ç¼–ç¨‹çš„æ¸¸æˆç­–åˆ’ï¼‰å¯ä»¥åœ¨æ™®é€šçš„ Arena ç¼–è¾‘å™¨ä¸­ï¼Œåƒè°ƒç”¨å®˜æ–¹ API ä¸€æ ·è½»æ¾åœ°è°ƒç”¨ä½ çš„ä»£ç ã€‚

## æ ¸å¿ƒç†å¿µï¼šä¸“ä¸šåˆ†å·¥

ä»£ç å¯¼å‡ºçš„æœ¬è´¨ï¼Œæ˜¯å°† **â€œåº•å±‚ç³»ç»Ÿå¼€å‘â€** ä¸ **â€œä¸Šå±‚ç©æ³•å®ç°â€** å½»åº•åˆ†ç¦»å¼€ã€‚

- **æ ¸å¿ƒåˆ›ä½œè€… (ä½ )**ï¼šåœ¨ ArenaPro ä¸­ï¼Œä½¿ç”¨ TypeScript æ„å»ºç¨³å®šã€å¯å¤ç”¨çš„åº•å±‚ç³»ç»Ÿï¼Œå¦‚æˆ˜æ–—æ¡†æ¶ã€UI ç»„ä»¶åº“ã€èƒŒåŒ…ç³»ç»Ÿç­‰ã€‚
- **æ¸¸æˆç­–åˆ’ / è„šæœ¬åˆ›ä½œè€…**ï¼šåœ¨ Arena ç¼–è¾‘å™¨ä¸­ï¼Œæ— éœ€å…³å¿ƒåº•å±‚å®ç°ï¼Œç›´æ¥è°ƒç”¨ä½ æä¾›çš„åŠŸèƒ½ï¼Œå¿«é€Ÿå®ç°ä¸Šå±‚ç©æ³•ã€æ­å»ºå…³å¡ã€‚

è¿™æ˜¯ä¸€ç§å›¢é˜Ÿåä½œæ¨¡å¼ã€‚

## å¦‚ä½•ä» ArenaPro å¯¼å‡ºä»£ç ï¼Ÿ

å°†ä½ çš„ä»£ç æš´éœ²ç»™å¤–éƒ¨ä¸–ç•Œéå¸¸ç®€å•ï¼Œåªéœ€ä¸€ä¸ªå…³é”®å­—ï¼š`export`ã€‚

1.  æ‰“å¼€ä½ çš„å…¥å£æ–‡ä»¶ï¼ˆä¾‹å¦‚ `server/App.ts`ï¼‰ã€‚
2.  åœ¨ä½ å¸Œæœ›åˆ†äº«çš„å‡½æ•°ã€ç±»æˆ–å˜é‡å‰ï¼Œæ·»åŠ  `export` å…³é”®å­—ã€‚

**å°±è¿™æ ·ï¼Œå®Œæˆäº†ï¼** Webpack åœ¨æ‰“åŒ…æ—¶ä¼šè‡ªåŠ¨å¤„ç†å‰©ä¸‹çš„äº‹æƒ…ï¼Œå°†ä½ å¯¼å‡ºçš„æ‰€æœ‰å†…å®¹ç»„ç»‡æˆä¸€ä¸ªæ¨¡å—ã€‚

### ç¤ºä¾‹ï¼šå¯¼å‡ºä¸€ä¸ªå‡½æ•°

```ts
// server/App.ts

// ä½¿ç”¨ export å…³é”®å­—ï¼Œå°†è¿™ä¸ªå‡½æ•°æš´éœ²å‡ºå»
export function createEnemy(type: "goblin" | "orc", position: Vector) {
  // ... å†…éƒ¨åŒ…å«å¤æ‚çš„é€»è¾‘ ...
  const model =
    type === "goblin" ? "asset/goblin.item.json" : "asset/orc.item.json";
  world.createEntity({ model, position });
  console.log(`åœ¨ ${position} åˆ›å»ºäº†ä¸€ä¸ª ${type}`);
}

// è¿™ä¸ªå‡½æ•°æ²¡æœ‰ exportï¼Œæ‰€ä»¥å¤–éƒ¨æ— æ³•è®¿é—®
function internalHelper() {
  // ...
}

export default {
  // ... æ¸¸æˆçš„ä¸»è¦é€»è¾‘ ...
};
```

## å¦‚ä½•åœ¨ Arena ç¼–è¾‘å™¨ä¸­è°ƒç”¨ï¼Ÿ

ç°åœ¨ï¼Œä½ çš„é˜Ÿå‹å°±å¯ä»¥åœ¨ Arena ç¼–è¾‘å™¨ä¸­è½»æ¾ä½¿ç”¨ä½ å¯¼å‡ºçš„åŠŸèƒ½äº†ã€‚

æ ¹æ®ä»£ç è¿è¡Œçš„ç¯å¢ƒï¼ˆæœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯ï¼‰ï¼ŒArena ç¼–è¾‘å™¨ä½¿ç”¨äº†ä¸åŒçš„æ¨¡å—ç³»ç»Ÿï¼Œå› æ­¤å¯¼å…¥è¯­æ³•ä¹Ÿç•¥æœ‰ä¸åŒã€‚

| ç¯å¢ƒ           | å¯¼å…¥è¯­æ³•             | è¯´æ˜                                            |
| -------------- | -------------------- | ----------------------------------------------- |
| **æœåŠ¡ç«¯è„šæœ¬** | `require` (CommonJS) | Arena çš„æœåŠ¡ç«¯ç¯å¢ƒä½¿ç”¨ Node.js é£æ ¼çš„æ¨¡å—ç³»ç»Ÿã€‚ |
| **å®¢æˆ·ç«¯è„šæœ¬** | `import` (ESM)       | Arena çš„å®¢æˆ·ç«¯ç¯å¢ƒæ”¯æŒæ›´ç°ä»£çš„ ES æ¨¡å—æ ‡å‡†ã€‚    |

### ç¤ºä¾‹ï¼šè°ƒç”¨å¯¼å‡ºçš„å‡½æ•°

ä½ çš„é˜Ÿå‹åœ¨ Arena çš„æœåŠ¡ç«¯è„šæœ¬ä¸­ï¼Œåªéœ€å†™ä¸‹é¢è¿™å‡ è¡Œç®€å•çš„ä»£ç ï¼Œå°±å¯ä»¥è°ƒç”¨ä½ ç²¾å¿ƒå°è£…çš„å¤æ‚åŠŸèƒ½ï¼š

```javascript
// åœ¨ Arena æœåŠ¡ç«¯è„šæœ¬ä¸­

// 1. ä½¿ç”¨ require å¯¼å…¥ä½ æ„å»ºå¥½çš„ JS æ–‡ä»¶
const myGameLib = require("./_server_bundle.js");

// 2. è°ƒç”¨ä½ å¯¼å‡ºçš„å‡½æ•°
myGameLib.createEnemy("goblin", { x: 0, y: 10, z: 0 });
myGameLib.createEnemy("orc", { x: 10, y: 10, z: 10 });
```

ä»–ä»¬å®Œå…¨ä¸éœ€è¦å…³å¿ƒ `createEnemy` å†…éƒ¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Œåªéœ€è¦çŸ¥é“å¦‚ä½•è°ƒç”¨å³å¯ã€‚

## ä»·å€¼ä¸ä¼˜åŠ¿

- **å¼€å‘é—¨æ§›é™ä½**ï¼šä¸ç†Ÿæ‚‰ ArenaPro çš„æˆå‘˜ä¹Ÿèƒ½é«˜æ•ˆå‚ä¸å¼€å‘ã€‚
- **å¼€å‘æ•ˆç‡æå‡**ï¼šæ ¸å¿ƒä»£ç ä¸€æ¬¡å¼€å‘ï¼Œå¤„å¤„ä½¿ç”¨ï¼Œé¿å…é‡å¤é€ è½®å­ã€‚
- **ä»£ç è´¨é‡ä¿éšœ**ï¼šæ ¸å¿ƒåŠŸèƒ½ç”±ä¸“äººç»´æŠ¤ï¼Œä¸Šå±‚é€»è¾‘å¯ä»¥å¿«é€Ÿè¿­ä»£ã€‚
- **è¿­ä»£é€Ÿåº¦åŠ å¿«**ï¼šæ¸…æ™°çš„èŒè´£åˆ†å·¥è®©å¹¶è¡Œå¼€å‘æˆä¸ºå¯èƒ½ã€‚

---

> **ä¸Šä¸€ç¯‡ï¼š[æŠ•ç¨¿ç¤¾åŒºï¼šå‘å¸ƒ NPM åŒ…](./contributing-to-dao3fun.md)**
>
> **ä¸‹ä¸€ç¯‡ï¼š[ğŸ“¦ å‘å¸ƒä½ çš„ç¬¬ä¸€ä¸ª NPM åŒ…](../07-publishing/createNPMProject.md)**
